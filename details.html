<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Item Details</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 id="item-name">Loading...</h1>
        <div class="content-layout">
            <div class="sidebar">
                <div class="image-container" id="item-pictures"></div>
                <table class="info-table" id="item-details"></table>
            </div>
            <div class="main-content">
                <p id="item-description"></p>
                <h2>Properties</h2>
                <table class="info-table" id="item-properties"></table>
            </div>
        </div>
        <a href="index.html">Back to List</a>
    </div>

    <script>
        async function loadItemDetails() {
            const params = new URLSearchParams(window.location.search);
            const itemId = params.get("id");
            if (!itemId) {
                document.body.innerHTML = "<h1>Item not found</h1>";
                return;
            }
            
            const response = await fetch('data.json');
            const data = await response.json();
            const item = data.find(i => i.id.toString() === itemId);
            
            if (!item) {
                document.body.innerHTML = "<h1>Item not found</h1>";
                return;
            }
            
            document.getElementById("item-name").textContent = item.name;
            document.getElementById("item-description").textContent = item.description;
            
            const detailsTable = document.getElementById("item-details");
            detailsTable.innerHTML = `
                <tr><th>Year Announced</th><td>${item.yearAnnounced}</td></tr>
                <tr><th>Year Abandoned</th><td>${item.yearAbandoned ?? 'N/A'}</td></tr>
                <tr><th>Total Made</th><td>${item.totalMade}</td></tr>
                <tr><th>Type</th><td>${item.type}</td></tr>
                <tr><th>Made By</th><td>${item.madeBy}</td></tr>
                <tr><th>Used By</th><td>${item.usedBy}</td></tr>
            `;
            
            const propertiesTable = document.getElementById("item-properties");
            propertiesTable.innerHTML = item.properties.map(prop => 
                `<tr><th>${prop.name}</th><td>${prop.value}</td></tr>`
            ).join('');
            
            const picturesDiv = document.getElementById("item-pictures");
            picturesDiv.innerHTML = item.pictures.map(pic => `<img src="${pic}" alt="Image">`).join('');
        }
        
        loadItemDetails().catch(error => console.error('Error loading details:', error));
    </script>
</body>
</html>
